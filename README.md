# Gamma PDN Strategy

<img width="899" alt="Screen Shot 2023-12-19 at 2 28 11 AM" src="https://github.com/degenRobot/gamma-pdn-strategy/assets/86513395/7ef6db5d-c64a-4f2a-a0fc-4409b5b425a0">

The strategy presented deploys assets in AAVE & Gamma Strategies to earn yield on USDC. Yield generated by the strategy comes from the below sources 

Lending on AAVE (note strategy also pays to borrow ETH which is deposited alongside USDC not used as collateral) 
Trading Fees from Gamma LP Management 
Additional QUICK Rewards by depositing into USDC/ETH Pool 

The below diagram illustrates how funds are allocated by the strategy 

![Strategy Diagrams Internal (1)](https://github.com/degenRobot/gamma-pdn-strategy/assets/86513395/261d7a1a-7ef2-40c4-9b11-1e47071962f8)

# Risks & Mitigations

Drawdowns from Impermanent Loss : Instead of providing liquidity directly to a QuickSwap pool we utilise Gamma Strategies where Liquidity ranges are automatically rebalanced when certain rebalance triggers are hit. This means we are not exposes to huge drawdowns due to the non-linear nature of IL (as prices move further away from initial position losses increase). This does not guarentee the strategy will not face any losses as small drawdowns are still expected in particular during volatile periods. However we anticipate based on historical data from Gamma & current yields available the returns from farming & trading fees will outweigh any losses due to IL. 

Liquidation from Collateral Movement : As the strategy borrows ETH in order to have the necessary funds to enter the GAMMA USDC/ETH pool the strategy is potentially exposed to liquidation in the case that the price of ETH increases significantly. In order to mitigate this a rebalanceCollateral function can be called (this is pending development & testing). This function would be called externally by Keepers i.e. Chainlink Automation/Gelato (using onlyKeepers modifier) and will unwind part of the position allocated to GAMMA to repay debt & increase collateral (increasing collateral). Also in the converse case where the collateral ratio has dropped significantly (ETH decrease in price) the function can be called to redeem some collateral, borrow more ETH and increase the strategies position held in Gamma. 

External Price Manipulation : As the strategy deploys funds to volatile LP pools upon withdrawals some swaps may need to be executed to rebalance assets. This potentially opens up the strategy to external manipulation, in order to mitigate this the function _testPriceSource is called whenever funds are freed. This function compares the price of ETH/USDC on the concentrated liquidity pool utilised & AAVEâ€™s price oracle. If the price differs by more than some preset threshold withdrawals are not processed to avoid external manipulation
